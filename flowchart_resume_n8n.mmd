flowchart LR
  %% Main pipeline
  T["New Resume Uploaded<br/>(Google Drive)"] --> D["Download Resume File<br/>(from Drive)"]
  D --> W["Save Resume to Disk<br/>(Write File to Disk)"]
  W --> L{{"Loop: Process Each Resume"}}
  L -- "Yes" --> O["OCR: Extract Text from Resume<br/>(Typhoon OCR)"]
  O --> C["LLM: Analyze Resume with JD"]
  C --> P["Parser: Convert LLM Output to JSON"]
  P --> S[/"Save Results to Google Sheet<br/>(Append Row)"/]
  S --> L
  L -- "No (done)" --> E([End])

  %% Optional helpers / dependencies (dotted lines)
  LM1[("(Model) Vertex AI<br/>gemini-2.5-flash")] -.-> C
  H1["LLM Helper:<br/>Resume Scoring/Reasoning"] -.-> C
  LM2[("(Model) Vertex AI<br/>(helper)")] -.-> P
  H2["LLM Helper:<br/>Additional Analysis"] -.-> P
